import math

from constants import char, poly, boolean_matrix, evaluate_polynomial

randoms = []

def round_summatory(p:list, r:int, subval:list):

    #r is the round, 0<r<=n

    #subval is the vector of random elements in the field. It has r-1 elements.

    subval.append(1)

    n=len(p)-r

    power = int(math.pow(2,n-1))

    univariate = []#The univariate polynomial
   
    for i in range (0,len(p)):
        univariate.append(0)


    for i in range (0,power):
        if (n>1):
            val = subval+(boolean_matrix(n-1)[i])#Now, val is a vector (v_1,...,v_{r-1},X_r,v_{r+1},...,v_n) such that v_1,...,v_{r-1} are random elements of the field and v_{r+1},...,v_n are boolean elements.
    #The missing element, v_r (here v_r=1), is the variable X_r of the univariate polynomial that the prover must equalize.
        else:
            val = subval #In this case, the variable of the univariate polynomial is the last one, and so there is no need to add values of a boolean_matrix
        for j in range (1, len(p)):
            
            degree = p[j][r]
           
            monomial = [[0]]+[p[j]]

            univariate[degree] = univariate[degree]+evaluate_polynomial(monomial, val)

        univariate[0] = univariate[0]+p[0][0]

    print(univariate)

    c1= 0
    for i in range (0,len(univariate)):#
        c1 = c1+univariate[i]

    c = (univariate[0])+c1#This value is g1(0)+g1(1) described in page 34 of the JThaler book.
    return(c%char)
print("Write the round")
r = int(input())

if (r>1):
    print("Write the "+str(r-1)+" random values")

for i in range (1,r):
    randoms.append(int(input()))

round_summatory(poly, r, randoms)
